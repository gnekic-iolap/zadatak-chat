const bcrypt = require ('bcrypt')

export default{
	Query:{
		allUsers: (parent, args, { models }) => models.User.findALL(),
		getUser: (parent , { username }, { models }) =>
		models.User.findOne({
			where:{
				username,
			},
		}),
	},
	Mutation: {
		register: async (parent, args, { models }) =>{
			const user = args;
			user.password = await bcrypt.hash(user.password, 12);
			models.User.create(user);
		},
		updateUser:(parent, {username, newUsername}, { models }) =>
			model.User.update({ username: newUsername }, { where : {username}}),
		deleteUser: (parent , args , { models }) =>
			model.User.destroy({ where: args}),
	},
};